<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enter the Code</title>
    <!-- Load Tailwind CSS --><script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Use the Inter font */
        body {
            font-family: 'Inter', sans-serif;
        }

        /* Remove the default number input spinners */
        input[type=number]::-webkit-inner-spin-button,
        input[type=number]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        input[type=number] {
            -moz-appearance: textfield;
        }

        /* Shake animation for incorrect code */
        @keyframes shake {
            10%, 90% {
                transform: translateX(-1px);
            }
            20%, 80% {
                transform: translateX(2px);
            }
            30%, 50%, 70% {
                transform: translateX(-4px);
            }
            40%, 60% {
                transform: translateX(4px);
            }
        }
        .animate-shake {
            animation: shake 0.7s cubic-bezier(.36,.07,.19,.97) both;
        }
    </style>
    <!-- Preload the Inter font --><link rel="preconnect" href="https://rsms.me/">
    <link rel="stylesheet" href="https://rsms.me/inter/inter.css">
</head>
<body class="bg-white text-gray-800 min-h-screen flex items-center justify-center p-4">

    <main class="w-full max-w-md text-center">
        
        <!-- Code Entry Section --><div id="code-entry-container">
            <h1 class="text-3xl font-bold mb-4">Enter the Code</h1>
            <p class="text-gray-600 mb-8">Enter the 4-digit combination to proceed.</p>

            <!-- Input boxes container --><div id="code-inputs" class="flex justify-center space-x-3 sm:space-x-4">
                <!-- Each input is type="tel" for a better mobile keyboard, but maxLength="1" behaves like text --><!-- The background colors now match the requirements: Black (gray-900), Green, Yellow, Purple --><input type="tel" id="code-1" data-index="1" maxlength="1"
                       class="code-input w-16 h-20 sm:w-20 sm:h-24 text-4xl font-bold text-center bg-gray-900 border-2 border-gray-900 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200"
                       placeholder="">
                <input type="tel" id="code-2" data-index="2" maxlength="1"
                       class="code-input w-16 h-20 sm:w-20 sm:h-24 text-4xl font-bold text-center bg-green-500 border-2 border-green-500 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200"
                       placeholder="">
                <input type="tel" id="code-3" data-index="3" maxlength="1"
                       class="code-input w-16 h-20 sm:w-20 sm:h-24 text-4xl font-bold text-center bg-yellow-500 border-2 border-yellow-500 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200"
                       placeholder="">
                <input type="tel" id="code-4" data-index="4" maxlength="1"
                       class="code-input w-16 h-20 sm:w-20 sm:h-24 text-4xl font-bold text-center bg-purple-500 border-2 border-purple-500 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200"
                       placeholder="">
            </div>

            <!-- Error Message --><p id="error-message" class="text-red-500 mt-6 font-semibold hidden">
                Invalid Code. Please try again.
            </p>
        </div>

        <!-- Hidden Image Section --><div id="secret-image-container" class="hidden">
            <h2 class="text-3xl font-bold mb-6 text-green-600">Access Granted</h2>
            <img id="secret-image" 
                 src="uploaded:A Document Forgery.jpg-c452aad7-3ba6-4e7e-9eb6-aaffa2ace4ab" 
                 alt="A secret revealed"
                 class="w-full max-w-md rounded-lg shadow-2xl shadow-green-500/20"
                 onerror="this.alt='Error loading image. The secret is safe.'; this.classList.add('border', 'border-red-500', 'p-4');">
        </div>

    </main>

    <script>
        const correctCode = "5746";
        const codeInputs = document.querySelectorAll('.code-input');
        const codeContainer = document.getElementById('code-inputs');
        const errorMessage = document.getElementById('error-message');
        const codeEntryContainer = document.getElementById('code-entry-container');
        const secretImageContainer = document.getElementById('secret-image-container');

        // Focus the first input on page load
        window.addEventListener('load', () => codeInputs[0].focus());

        codeInputs.forEach((input, index) => {
            // Event listener for when a key is pressed
            input.addEventListener('keydown', (e) => {
                // If backspace is pressed and the input is empty, move to the previous input
                if (e.key === 'Backspace' && input.value === '' && index > 0) {
                    codeInputs[index - 1].focus();
                }
            });

            // Event listener for when a value is input
            input.addEventListener('input', (e) => {
                const value = e.target.value;

                // Only allow numbers
                if (isNaN(value)) {
                    input.value = '';
                    return;
                }
                
                // If a number is entered, move to the next input
                if (value !== '' && index < codeInputs.length - 1) {
                    codeInputs[index + 1].focus();
                }

                // Check the code if all inputs are filled
                checkCode();
            });
        });

        function checkCode() {
            const enteredCode = Array.from(codeInputs).map(input => input.value).join('');

            // If the code is not 4 digits long, do nothing yet
            if (enteredCode.length < 4) {
                errorMessage.classList.add('hidden');
                return;
            }

            // If the code is 4 digits, check it
            if (enteredCode === correctCode) {
                // Correct code
                codeEntryContainer.classList.add('hidden');
                secretImageContainer.classList.remove('hidden');
            } else {
                // Incorrect code
                errorMessage.classList.remove('hidden');
                codeContainer.classList.add('animate-shake');

                // Disable inputs during shake
                codeInputs.forEach(input => input.disabled = true);

                // After shake, clear inputs, re-enable, and focus the first one
                setTimeout(() => {
                    codeContainer.classList.remove('animate-shake');
                    errorMessage.classList.add('hidden');
                    codeInputs.forEach(input => {
                        input.value = '';
                        input.disabled = false;
                    });
                    codeInputs[0].focus();
                }, 700); // Must match animation duration
            }
        }
    </script>
</body>
</html>


